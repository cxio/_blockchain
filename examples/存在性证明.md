## 存在性证明

**存在**本身是一个有意义的逻辑，它表示一个客观存在，或者用于证明自己才是原创，或者记录一段历史……。这种存在性的**证明**有时很有必要。


### 用例

对于一笔交易来说，时间戳可以是任意的，它由用户自由设置。这可能带来一个缺陷：你无法严格区分两笔交易在现实中谁更先出现。这在存在性证明中是一个严重的问题，如在下面的「原创论文」证明中：

- 一个窃取者可以对一个出现不久的论文证明交易复制其证明内容，修改版权，创建自己的交易并设定为更早的时间戳。
- 通常原创者的交易会先进入区块，因为它确实先出现，但这不足以证明窃取者的交易是后出现的，因为网络可能拥堵延迟，交易的打包者也可以有所选择。

本系统中设计了**交易过期**机制，对缓存池中未收录进区块的交易有一个时间限制（过期则丢弃），因此可以解决这一问题。


### 操作

分两次发布目标的存在性证明。

1. 首先发布一笔结果声明交易（管理者交易），提供必要的哈希摘要。
2. 等上面的交易进入区块并经过足够的时间（交易过期时段）后，发布目标本身的交易，其中包含跳转到前一笔交易的验证。


### 脚本

**结果声明：**（管理者交易）

```go
IN{Content}                     // 取存证内容
IN{Attachment}                  // 取存证附件ID
ADD                             // 串接
FN_HASH256                      // 计算哈希摘要
DATA{<hashResult>} EQUAL PASS   // 是否与结果相等而通过验证
```

**目标声明：**（存证交易）

```go
// 嵌入结果声明验证
// 定位：区块高度, 交易ID, 输出序位
JUMP[<Height>, <TxID>, <Index>]

@TEXT{Is good.} PRINT   // 友好打印

@ENV{TxID}              // 取当前交易ID
@OUT{Title}             // 取存证标题
OUTPUT BUFDUMP          // 导出必要信息，触发外部应用逻辑，可选
```

> **说明：**<br>
> 在存证输出中写入标题、内容和附件ID，由跳转（`JUMP`）目标提取、计算和验证。<br>
> 因为存证信元没有转移逻辑，所以其脚本需要由应用App主动处理。<br>
